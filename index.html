<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Wedding of Aep & Meida</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Montserrat:wght@300;400&display=swap" rel="stylesheet">
    <style>
        :root {
            --blush: #fff5f5;
            --rose: #e53e3e;
            --champagne: #f3e5f5;
            --text-main: #4a3a3a;
        }
        body { 
            margin: 0; 
            overflow-x: hidden; 
            font-family: 'Montserrat', sans-serif; 
            background-color: var(--blush); 
            color: var(--text-main);
            /* Menambahkan tekstur kertas halus */
            background-image: url("data:image/svg+xml,%3Csvg width='6' height='6' viewBox='0 0 6 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%239C92AC' fill-opacity='0.03' fill-rule='evenodd'%3E%3Cpath d='M5 0h1L0 6V5zM6 5v1H5z'/%3E%3C/g%3E%3C/svg%3E");
        }
        canvas { 
            display: block; 
            position: fixed; 
            top: 0; 
            left: 0; 
            z-index: 1; 
            pointer-events: none; 
        }
        
        /* BACKGROUND BARU: TEMA MASJID */
        .main-bg {
            position: fixed;
            inset: 0;
            z-index: 0;
            /* Update: Menggunakan file lokal. Pastikan file 'background.jpg' ada di folder 'Foto' */
            background-image: linear-gradient(rgba(255, 245, 245, 0.85), rgba(255, 245, 245, 0.7)), 
                              url('foto/masjid2.jpg');
            background-size: cover;
            background-position: center bottom; /* Fokus ke bagian bawah arsitektur */
            background-attachment: fixed;
            opacity: 0;
            transition: opacity 2s ease;
        }
        .main-bg.visible { opacity: 1; }

        /* Dekorasi Sudut Floral (CSS Only) */
        .floral-corner {
            position: fixed;
            width: 300px;
            height: 300px;
            pointer-events: none;
            z-index: 0;
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0.15; /* Transparan agar tidak mengganggu teks */
            mix-blend-mode: multiply;
        }
        
        .content-overlay { position: relative; z-index: 10; }
        .interactive { pointer-events: auto; }
        
        .font-cursive { font-family: 'Dancing Script', cursive; }
        .font-serif { font-family: 'Playfair Display', serif; }
        
        html { scroll-behavior: smooth; }

        .reveal { opacity: 0; transform: translateY(20px); transition: all 1.2s ease-out; }
        .reveal.visible { opacity: 1; transform: translateY(0); }

        .glass-soft { 
            background: rgba(255, 255, 255, 0.65); /* Sedikit lebih solid agar kontras dengan detail masjid */
            backdrop-filter: blur(16px); 
            border: 1px solid rgba(255, 255, 255, 0.8); 
            box-shadow: 0 8px 32px 0 rgba(229, 62, 62, 0.05);
        }

        #cover {
            position: fixed; inset: 0; z-index: 100; 
            /* Background cover dengan nuansa Islami yang lembut */
            background: linear-gradient(135deg, #fff0f0 0%, #ffe4e4 100%), 
                        url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23e53e3e' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: transform 1.2s cubic-bezier(0.77, 0, 0.175, 1);
        }

        /* Frame dekoratif di cover */
        .cover-frame {
            position: absolute;
            inset: 20px;
            border: 1px solid rgba(229, 62, 62, 0.2);
            border-radius: 20px; /* Bentuk kubah sedikit melengkung */
            pointer-events: none;
        }
        .cover-frame::before {
            content: ''; position: absolute; inset: 4px;
            border: 1px solid rgba(229, 62, 62, 0.1);
            border-radius: 16px;
        }

        .hide-cover { transform: translateY(-100%); }

        .btn-romantic {
            background: #fff;
            color: #e53e3e;
            padding: 12px 35px;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(229, 62, 62, 0.1);
            transition: all 0.4s;
            letter-spacing: 2px;
            font-size: 12px;
            font-weight: 600;
            position: relative;
            z-index: 10;
        }
        .btn-romantic:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(229, 62, 62, 0.2); }

        .photo-container {
            position: relative;
            display: inline-block;
            padding: 20px;
        }
        
        .photo-frame {
            width: 260px;
            height: 260px;
            overflow: hidden;
            border-radius: 50%;
            border: 6px solid white;
            box-shadow: 0 15px 35px rgba(229, 62, 62, 0.15);
            transition: all 0.6s cubic-bezier(0.165, 0.84, 0.44, 1);
            position: relative;
            z-index: 2;
        }

        .photo-container::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            width: 290px;
            height: 290px;
            border: 1px dashed #e53e3e;
            border-radius: 50%;
            transform: translate(-50%, -50%) rotate(0deg);
            transition: all 1s ease;
            opacity: 0.4;
            z-index: 1;
            pointer-events: none;
        }

        .photo-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.8s ease;
        }

        .photo-container:hover .photo-frame {
            transform: scale(1.05);
            box-shadow: 0 20px 45px rgba(229, 62, 62, 0.25);
        }

        .photo-container:hover::after {
            transform: translate(-50%, -50%) rotate(180deg);
            opacity: 0.8;
            border-style: solid;
        }

        .map-wrapper {
            position: relative;
            padding: 10px;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(229, 62, 62, 0.08);
        }

        .map-responsive {
            overflow: hidden;
            padding-bottom: 75%; 
            position: relative;
            height: 0;
            border-radius: 18px;
        }
        
        @media (min-width: 768px) {
            .map-responsive { padding-bottom: 45%; }
        }

        .map-responsive iframe {
            left: 0;
            top: 0;
            height: 100%;
            width: 100%;
            position: absolute;
            border: 0;
            filter: grayscale(0.2) contrast(1.1); 
        }

        #custom-toast {
            visibility: hidden;
            min-width: 250px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 10px;
            padding: 16px;
            position: fixed;
            z-index: 1000;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%);
            font-size: 14px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }
        #custom-toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }
        @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;} }
        @keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 0; opacity: 0;} }

        /* Custom Scrollbar for Wishes */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(229, 62, 62, 0.3);
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(229, 62, 62, 0.5);
        }
    </style>
</head>
<body>

    <div id="custom-toast">Pesan berhasil dikirim!</div>

    <!-- Background Layer (Updated Image) -->
    <div id="main-bg-layer" class="main-bg"></div>

    <div id="cover">
        <div class="cover-frame"></div>
        <div class="text-center px-4 relative z-10">
            <p class="font-serif italic text-lg text-rose-400 mb-2">Pernikahan Dari</p>
            <h1 class="font-cursive text-5xl md:text-7xl text-rose-800 mb-8 leading-tight drop-shadow-sm">Aep Sahlani & Nurmeida</h1>
            <button onclick="openInvitation()" class="interactive btn-romantic uppercase">
                Buka Undangan
            </button>
        </div>
    </div>

    <button id="music-btn" onclick="toggleMusic()" class="fixed top-6 right-6 z-[100] interactive w-10 h-10 rounded-full glass-soft flex items-center justify-center text-rose-600 hidden hover:scale-110 transition-transform">
        <span id="music-status">‚ô´</span>
    </button>
    <audio id="bg-music" loop>
        <source src="Lagu/Di antara ribuan nama di dunia.mp3" type="audio/mpeg">
    </audio>

    <div id="main-content" class="content-overlay hidden">
        <!-- Bagian Hero -->
        <section class="h-screen flex flex-col justify-center items-center text-center px-6">
            <div class="reveal">
                <p class="font-serif italic text-xl text-rose-600 mb-4 font-medium">Membangun cinta yang abadi</p>
                <h1 class="font-cursive text-6xl md:text-8xl text-rose-900 mb-6 drop-shadow-sm">Aep & Meida</h1>
                <div class="inline-block border-y border-rose-300 py-2 px-6">
                    <p class="tracking-[0.3em] uppercase text-sm text-gray-600 font-semibold">Sabtu, 14 Februari 2026</p>
                </div>
            </div>
        </section>

        <!-- Profil Mempelai -->
        <section class="py-24 px-6 max-w-6xl mx-auto">
            <div class="grid md:grid-cols-2 gap-16 items-center">
                <div class="text-center reveal">
                    <div class="photo-container interactive mb-8">
                        <div class="photo-frame">
                            <img src="foto profil/aepsahlani.png" alt="Mempelai Pria">
                        </div>
                    </div>
                    <h2 class="font-serif text-3xl font-bold text-rose-900">Aep Sahlani Machya, S.Kom</h2>
                    <p class="mt-4 text-gray-600 italic font-medium">Putra tercinta dari Bpk. Drs.AFANDI & Dra.KARIH</p>
                </div>
                
                <div class="text-center reveal" style="transition-delay: 0.3s;">
                    <div class="photo-container interactive mb-8">
                        <div class="photo-frame">
                            <img src="foto profil/nurmeida.png" alt="Mempelai Wanita">
                        </div>
                    </div>
                    <h2 class="font-serif text-3xl font-bold text-rose-900">Nurmeida Widi Astuti, S.H</h2>
                    <p class="mt-4 text-gray-600 italic font-medium">Putri tercinta dari Bpk. MISNAN & Ibu Dwi Purwanti</p>
                </div>
            </div>
        </section>

        <!-- Detail Acara -->
        <section class="py-24 px-6">
            <div class="max-w-4xl mx-auto text-center">
                <h2 class="font-serif italic text-4xl text-rose-900 mb-12 reveal font-bold">Rangkaian Acara</h2>
                
                <div class="glass-soft p-8 md:p-12 reveal interactive mb-12 rounded-[40px] border border-white/60">
                    <div class="text-rose-400 text-3xl mb-8">‚ù¶</div>
                    
                    <div class="grid md:grid-cols-2 gap-12 divide-y md:divide-y-0 md:divide-x divide-rose-200">
                        <div class="pb-8 md:pb-0 md:pr-6">
                            <h3 class="font-serif text-2xl mb-4 text-rose-800 font-bold">Akad Nikah</h3>
                            <p class="font-light text-rose-700 text-lg">09.00 - 11.00 WIB</p>
                        </div>
                        <div class="pt-8 md:pt-0 md:pl-6">
                            <h3 class="font-serif text-2xl mb-4 text-rose-800 font-bold">Resepsi</h3>
                            <p class="font-light text-rose-700 text-lg">11.00 - 20.00 WIB</p>
                        </div>
                    </div>

                    <div class="mt-12">
                        <div class="mb-8">
                            <p class="text-2xl font-serif text-rose-900 mb-2 font-bold">Kediaman Mempelai Wanita</p>
                            <p class="text-sm text-gray-600 max-w-md mx-auto leading-relaxed">
                                Perumahan Bumi Asri, Blok d 7 No.5, RT.16/RW.3, Desa Pamijahan, Plumbon (Salon Diamond), KAB. CIREBON, PLUMBON, JAWA BARAT 45155
                            </p>
                        </div>
                        
                        <!-- Tampilan Peta Premium -->
                        <div class="map-wrapper mb-10">
                            <div class="map-responsive">
                                <iframe 
                                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d15849.234399999999!2d108.468!3d-6.715!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNsKwNDInNTQuMCJTIDEwOMKwMjgnMDQuOCJF!5e0!3m2!1sid!2sid!4v1700000000000!5m2!1sid!2sid" 
                                    allowfullscreen="" 
                                    loading="lazy" 
                                    referrerpolicy="no-referrer-when-downgrade">
                                </iframe>
                            </div>
                        </div>

                        <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                            <a href="https://maps.app.goo.gl/j16ye9r1qiaN9jbT8?g_st=aw" target="_blank" class="inline-flex items-center gap-2 bg-rose-500 text-white px-8 py-4 rounded-full text-[11px] font-bold tracking-widest hover:bg-rose-600 transition-all shadow-lg active:scale-95">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                                </svg>
                                PENUNJUK JALAN
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Bagian Digital Gift -->
        <section class="py-24 px-6">
            <div class="max-w-5xl mx-auto text-center">
                <h2 class="font-cursive text-5xl text-rose-900 mb-4 reveal">Digital Gift</h2>
                <p class="font-serif italic text-gray-600 mb-12 reveal">Doa restu Anda merupakan karunia yang sangat berarti bagi kami. Namun jika Anda ingin memberikan tanda kasih, Anda dapat mengirimkannya melalui:</p>
                
                <div class="grid md:grid-cols-3 gap-6 max-w-5xl mx-auto">
                    <!-- Bank BSI -->
                    <div class="glass-soft p-8 rounded-3xl reveal interactive hover:-translate-y-2 transition-transform duration-300">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a0/Bank_Syariah_Indonesia.svg" alt="BSI" class="h-8 mx-auto mb-6">
                        <p class="text-xs uppercase tracking-widest text-gray-500 mb-1">Nomor Rekening</p>
                        <p id="rek-bsi" class="text-xl font-bold text-rose-900 mb-2">7254285301</p>
                        <p class="text-sm text-gray-600 mb-6 font-medium">a.n Nurmeida widi astuti</p>
                        <button onclick="copyText('rek-bsi')" class="text-[10px] font-bold tracking-widest text-rose-500 border border-rose-200 px-6 py-2 rounded-full hover:bg-rose-500 hover:text-white transition-all uppercase w-full">Salin Nomor</button>
                    </div>

                    <!-- Bank BRI -->
                    <div class="glass-soft p-8 rounded-3xl reveal interactive hover:-translate-y-2 transition-transform duration-300" style="transition-delay: 0.2s;">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/f/f5/BANK_BRI_logo_%28vertical%29.svg" alt="BRI" class="h-6 mx-auto mb-8">
                        <p class="text-xs uppercase tracking-widest text-gray-500 mb-1">Nomor Rekening</p>
                        <p id="rek-bri" class="text-xl font-bold text-rose-900 mb-2">010701131579500</p>
                        <p class="text-sm text-gray-600 mb-6 font-medium">a.n Aep sahlani machya</p>
                        <button onclick="copyText('rek-bri')" class="text-[10px] font-bold tracking-widest text-rose-500 border border-rose-200 px-6 py-2 rounded-full hover:bg-rose-500 hover:text-white transition-all uppercase w-full">Salin Nomor</button>
                    </div>

                    <!-- Kirim Kado Fisik -->
                    <div class="glass-soft p-8 rounded-3xl reveal interactive hover:-translate-y-2 transition-transform duration-300" style="transition-delay: 0.4s;">
                        <div class="h-8 mb-6 mx-auto text-rose-500 flex justify-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7" />
                            </svg>
                        </div>
                        <p class="text-xs uppercase tracking-widest text-gray-500 mb-1">Kirim Kado</p>
                        <p class="text-xl font-bold text-rose-900 mb-2">Alamat Mempelai</p>
                        <p id="alamat-kado" class="text-sm text-gray-600 mb-6 line-clamp-2 leading-relaxed font-medium">Perumahan Bumi Asri, Blok d 7 No.5, RT.16/RW.3, Desa Pamijahan, Plumbon (Salon Diamond), KAB. CIREBON, PLUMBON, JAWA BARAT 45155</p>
                        <button onclick="copyText('alamat-kado')" class="text-[10px] font-bold tracking-widest text-rose-500 border border-rose-200 px-6 py-2 rounded-full hover:bg-rose-500 hover:text-white transition-all uppercase w-full">Salin Alamat</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Bagian Form RSVP & WISHES -->
        <section id="rsvp" class="py-24 px-6 max-w-2xl mx-auto">
            <!-- Form Card -->
            <div class="glass-soft p-12 rounded-[40px] reveal interactive text-center border-2 border-rose-100/50 mb-12">
                <div class="mb-8">
                    <span class="text-rose-400 text-3xl">‚úâ</span>
                    <h2 class="font-cursive text-5xl text-rose-900 mt-2">Konfirmasi Kehadiran</h2>
                    <p class="text-gray-600 mt-4 font-serif italic">Mohon konfirmasi kehadiran Anda untuk membantu kami dalam persiapan acara.</p>
                </div>

                <form id="rsvpForm" onsubmit="handleRSVP(event)" class="space-y-5 text-left">
                    <div>
                        <label class="block text-[10px] uppercase tracking-widest text-rose-800 font-bold mb-2 ml-1">Nama Lengkap</label>
                        <input type="text" id="rsvpName" required placeholder="Masukkan Nama Anda" class="w-full bg-white/70 p-4 rounded-2xl outline-none focus:ring-2 focus:ring-rose-300 transition-all text-sm placeholder:text-gray-400 border border-white/50">
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-[10px] uppercase tracking-widest text-rose-800 font-bold mb-2 ml-1">Jumlah Tamu</label>
                            <select id="rsvpGuest" class="w-full bg-white/70 p-4 rounded-2xl outline-none text-sm text-gray-600 appearance-none focus:ring-2 focus:ring-rose-300 cursor-pointer border border-white/50">
                                <option value="1">1 Orang</option>
                                <option value="2">2 Orang</option>
                                <option value="3">3 Orang</option>
                                <option value="4">4 Orang</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-[10px] uppercase tracking-widest text-rose-800 font-bold mb-2 ml-1">Konfirmasi</label>
                            <select id="rsvpStatus" class="w-full bg-white/70 p-4 rounded-2xl outline-none text-sm text-gray-600 appearance-none focus:ring-2 focus:ring-rose-300 cursor-pointer border border-white/50">
                                <option value="Hadir">Akan Hadir</option>
                                <option value="Tidak Hadir">Berhalangan</option>
                                <option value="Ragu">Masih Ragu</option>
                            </select>
                        </div>
                    </div>

                    <div>
                        <label class="block text-[10px] uppercase tracking-widest text-rose-800 font-bold mb-2 ml-1">Ucapan & Doa (Opsional)</label>
                        <textarea id="rsvpMessage" rows="3" placeholder="Tuliskan pesan manis Anda..." class="w-full bg-white/70 p-4 rounded-2xl outline-none focus:ring-2 focus:ring-rose-300 transition-all text-sm placeholder:text-gray-400 resize-none border border-white/50"></textarea>
                    </div>

                    <button type="submit" class="w-full bg-rose-500 text-white py-5 rounded-2xl text-[11px] font-bold tracking-widest hover:bg-rose-600 transition-all shadow-xl active:scale-95 uppercase mt-4">
                        Kirim Konfirmasi
                    </button>
                </form>
            </div>

            <!-- Wishes Display Section -->
            <div class="glass-soft p-8 rounded-[40px] reveal interactive">
                <h3 class="font-serif text-2xl text-rose-900 mb-6 text-center font-bold">Ucapan & Doa</h3>
                <div id="wishes-container" class="space-y-4 max-h-[400px] overflow-y-auto custom-scrollbar px-2">
                    <!-- Dummy Data 1 -->
                    <div class="bg-white/70 p-4 rounded-2xl border border-white shadow-sm">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-bold text-rose-900 text-sm">Dimas & Rina</h4>
                            <span class="text-[10px] bg-green-100 text-green-700 px-2 py-1 rounded-full font-bold">Hadir</span>
                        </div>
                        <p class="text-gray-700 text-sm italic">"Selamat ya Aep & Meida! Semoga menjadi keluarga sakinah mawaddah warahmah."</p>
                        <p class="text-[10px] text-gray-400 mt-2 text-right">Baru saja</p>
                    </div>
                    
                    <!-- Dummy Data 2 -->
                    <div class="bg-white/70 p-4 rounded-2xl border border-white shadow-sm">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-bold text-rose-900 text-sm">Pak Budi Santoso</h4>
                            <span class="text-[10px] bg-red-100 text-red-700 px-2 py-1 rounded-full font-bold">Tidak Hadir</span>
                        </div>
                        <p class="text-gray-700 text-sm italic">"Mohon maaf belum bisa hadir karena ada dinas luar kota. Doa terbaik untuk kalian berdua."</p>
                        <p class="text-[10px] text-gray-400 mt-2 text-right">1 jam yang lalu</p>
                    </div>
                     <!-- Dummy Data 3 -->
                     <div class="bg-white/70 p-4 rounded-2xl border border-white shadow-sm">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-bold text-rose-900 text-sm">Siti Nurhaliza</h4>
                            <span class="text-[10px] bg-green-100 text-green-700 px-2 py-1 rounded-full font-bold">Hadir</span>
                        </div>
                        <p class="text-gray-700 text-sm italic">"Happy Wedding Meida cantikk! Lancar sampai hari H yaaa ü•∞"</p>
                        <p class="text-[10px] text-gray-400 mt-2 text-right">2 jam yang lalu</p>
                    </div>
                </div>
            </div>
        </section>

        <footer class="py-20 text-center opacity-70">
            <p class="font-cursive text-2xl mb-2 text-rose-900">Aep & Meida</p>
            <p class="text-[9px] tracking-widest uppercase font-bold text-rose-800">Kami sangat menantikan kehadiran Anda</p>
        </footer>
    </div>

    <script>
        let scene, camera, renderer, petals = [];
        const petalCount = 150;

        function openInvitation() {
            document.getElementById('cover').classList.add('hide-cover');
            document.getElementById('main-content').classList.remove('hidden');
            document.getElementById('music-btn').classList.remove('hidden');
            
            // Activate background image
            document.getElementById('main-bg-layer').classList.add('visible');
            
            document.getElementById('bg-music').play().catch(() => {});
            
            setTimeout(() => {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) entry.target.classList.add('visible');
                    });
                }, { threshold: 0.1 });
                
                document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
            }, 500);
        }

        function showToast(message) {
            const toast = document.getElementById("custom-toast");
            toast.innerText = message;
            toast.className = "show";
            setTimeout(() => { toast.className = toast.className.replace("show", ""); }, 3000);
        }

        function copyText(id) {
            const text = document.getElementById(id).innerText;
            const dummy = document.createElement("textarea");
            document.body.appendChild(dummy);
            dummy.value = text;
            dummy.select();
            document.execCommand("copy");
            document.body.removeChild(dummy);
            
            // Custom message if copying address
            if(id === 'alamat-kado') {
                showToast("Alamat berhasil disalin!");
            } else {
                showToast("Nomor rekening berhasil disalin!");
            }
        }

        // Updated RSVP Handler
        function handleRSVP(event) {
            event.preventDefault();
            const name = document.getElementById('rsvpName').value;
            const status = document.getElementById('rsvpStatus').value;
            const message = document.getElementById('rsvpMessage').value || "Semoga lancar dan bahagia selalu!";
            
            const btn = event.target.querySelector('button');
            const originalText = btn.innerText;
            btn.innerText = "MENGIRIM...";
            btn.disabled = true;

            // Simulate sending data
            setTimeout(() => {
                // Add to wishes list
                addWishToDisplay(name, status, message);
                
                showToast(`Terima kasih ${name}, konfirmasi Anda telah kami terima!`);
                btn.innerText = originalText;
                btn.disabled = false;
                event.target.reset();
            }, 1000);
        }

        function addWishToDisplay(name, status, message) {
            const container = document.getElementById('wishes-container');
            
            // Determine badge color
            let badgeClass = "bg-gray-100 text-gray-700";
            if(status === "Hadir") badgeClass = "bg-green-100 text-green-700";
            if(status === "Tidak Hadir") badgeClass = "bg-red-100 text-red-700";
            
            const newWish = document.createElement('div');
            newWish.className = "bg-white/70 p-4 rounded-2xl border border-white shadow-sm animate-fade-in";
            newWish.innerHTML = `
                <div class="flex justify-between items-start mb-2">
                    <h4 class="font-bold text-rose-900 text-sm">${name}</h4>
                    <span class="text-[10px] ${badgeClass} px-2 py-1 rounded-full font-bold">${status}</span>
                </div>
                <p class="text-gray-700 text-sm italic">"${message}"</p>
                <p class="text-[10px] text-gray-400 mt-2 text-right">Baru saja</p>
            `;
            
            // Add to top
            container.insertBefore(newWish, container.firstChild);
        }

        let isPlaying = true;
        function toggleMusic() {
            const music = document.getElementById('bg-music');
            const status = document.getElementById('music-status');
            if(isPlaying) {
                music.pause();
                status.innerText = '‚ô™';
            } else {
                music.play();
                status.innerText = '‚ô´';
            }
            isPlaying = !isPlaying;
        }

        function init3D() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;

            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            document.body.appendChild(renderer.domElement);

            const petalGeometry = new THREE.PlaneGeometry(0.15, 0.15);
            const petalMaterial = new THREE.MeshBasicMaterial({ 
                color: 0xffd1d1, 
                side: THREE.DoubleSide, 
                transparent: true, 
                opacity: 0.7 
            });

            for(let i=0; i<petalCount; i++) {
                const petal = new THREE.Mesh(petalGeometry, petalMaterial);
                petal.position.set(
                    (Math.random() - 0.5) * 15,
                    (Math.random() - 0.5) * 15,
                    (Math.random() - 0.5) * 10
                );
                petal.rotation.set(Math.random() * Math.PI, Math.random() * Math.PI, 0);
                petal.velocity = {
                    y: -0.01 - Math.random() * 0.02,
                    x: (Math.random() - 0.5) * 0.01,
                    r: Math.random() * 0.02
                };
                scene.add(petal);
                petals.push(petal);
            }

            animate();
        }

        function animate() {
            requestAnimationFrame(animate);
            petals.forEach(p => {
                p.position.y += p.velocity.y;
                p.position.x += Math.sin(Date.now() * 0.001 + p.position.y) * 0.005;
                p.rotation.x += p.velocity.r;
                p.rotation.z += p.velocity.r;
                if(p.position.y < -7) {
                    p.position.y = 7;
                    p.position.x = (Math.random() - 0.5) * 15;
                }
            });
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        window.onload = init3D;
    </script>
</body>
</html>
